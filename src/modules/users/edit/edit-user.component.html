<form #editForm="ngForm" (ngSubmit)="onEdit()">
  <div class="form-group">
    <label for="firstName">First name</label>
    <div>
      <input id="firstName"
             name="firstName"
             class="form-control"
             [(ngModel)]="currentItem.first_name"
             #firstName="ngModel"
             type="text"
             placeholder="First name"
             autocomplete="off"
             minlength="{{minLength}}"
             required/>
      <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)"
           class="alert alert-danger alert-error">
        <div *ngIf="firstName.errors.required">First name is required</div>
        <div *ngIf="firstName.errors.minlength">First name min length is {{minLength}}</div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="lastName">Last name</label>
    <div>
      <input id="lastName"
             name="lastName"
             class="form-control"
             [(ngModel)]="currentItem.last_name"
             #lastName="ngModel"
             type="text"
             placeholder="Last name"
             autocomplete="off"
             minlength="{{minLength}}"
             required/>
      <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)"
           class="alert alert-danger alert-error">
        <div *ngIf="lastName.errors.required">Last name is required</div>
        <div *ngIf="lastName.errors.minlength">Last name min length is {{minLength}}</div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="userName">User name</label>
    <div>
      <input id="userName"
             name="userName"
             class="form-control"
             [(ngModel)]="currentItem.username"
             #userName="ngModel"
             type="text"
             placeholder="User name"
             autocomplete="off"
             minlength="{{minLength}}"
             required/>
      <div *ngIf="userName.invalid && (userName.dirty || userName.touched)"
           class="alert alert-danger alert-error">
        <div *ngIf="userName.errors.required">User name is required</div>
        <div *ngIf="userName.errors.minlength">User name min length is {{minLength}}</div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="email">Email</label>
    <div>
      <input id="email"
             name="email"
             class="form-control"
             [(ngModel)]="currentItem.email"
             #email="ngModel"
             type="text"
             placeholder="Email"
             autocomplete="off"
             email
             required/>
      <div *ngIf="email.invalid && (email.dirty || email.touched)"
           class="alert alert-danger alert-error">
        <div *ngIf="email.errors.required">Email is required</div>
        <div *ngIf="email.errors.email">Email is not valid</div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <div>
      <input id="password"
             name="password"
             class="form-control"
             [(ngModel)]="currentItem.password"
             #password="ngModel"
             type="password"
             placeholder="Password"
             autocomplete="off"
             appPasswordComplex
             required/>
      <small>8 characters, symbols, numbers, special characters</small>
      <div *ngIf="password.invalid && (password.dirty || password.touched)"
           class="alert alert-danger alert-error">
        <div *ngIf="password.errors.required">Password is required</div>
        <div *ngIf="password.errors.appPasswordComplex && !password.errors.required">Password is not complex</div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="passwordTwice">Password twice</label>
    <div>
      <input id="passwordTwice"
             name="passwordTwice"
             class="form-control"
             [(ngModel)]="passwordTwiceModel"
             #passwordTwice="ngModel"
             type="password"
             placeholder="Password twice"
             autocomplete="off"
             required/>
      <div
        *ngIf="passwordTwice.invalid && (passwordTwice.dirty || passwordTwice.touched) && passwordTwice.errors.required"
        class="alert alert-danger alert-error">
        Password twice is required
      </div>
      <div
        *ngIf="showPasswordTwiceError(passwordTwice, password)"
        class="alert alert-danger alert-error">
        Passwords do not match
      </div>
    </div>
  </div>
  <div *ngIf="showErrorMessage && editForm.form.valid && !showSuccessMessage" class="alert alert-danger alert-error">
    User with this user name or email already exists
  </div>
  <div *ngIf="showSuccessMessage" class="alert alert-success alert-error">
    User was saved successfully
  </div>
  <div>
    <div class="btn-group form-group">
      <button [disabled]="!editForm.form.valid || showPasswordTwiceError(passwordTwice, password) || isInProccess"
              type="submit" class="btn btn-primary btn-block btn-block-small">
        <span *ngIf="isInProccess"><i class="glyphicon glyphicon-refresh spinning"></i></span>
        Register
      </button>
    </div>
    <div class="btn-group form-group">
      <a [routerLink]="['']" class="btn btn-default btn-block btn-block-small">
        Sign in
      </a>
    </div>
  </div>
</form>
